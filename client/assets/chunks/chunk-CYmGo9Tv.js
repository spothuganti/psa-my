function V(){return typeof window<"u"&&typeof window.scrollY=="number"}function we(){return!(typeof process>"u"||!process.cwd||!process.versions||typeof process.versions.node>"u"||!process.release||process.release.name!=="node")}function U(e,t){let n;{var r=Error.stackTraceLimit;Error.stackTraceLimit=1/0,n=new Error(e),Error.stackTraceLimit=r}return we()&&(n.stack=Se(n.stack,t)),n}function Se(e,t){if(!e)return e;const n=ve(e);let r=0;return n.filter(s=>s.includes(" (internal/")||s.includes(" (node:internal")?!1:r<t&&$e(s)?(r++,!1):!0).join(`
`)}function $e(e){return e.startsWith("    at ")}function ve(e){return e.split(/\r?\n/)}function T(e,t){const n=globalThis.__vite_plugin_ssr=globalThis.__vite_plugin_ssr||{};return n[e]=n[e]||t}function S(e){return typeof e=="object"&&e!==null}function B(e){return Array.from(new Set(e))}const w=T("assertPackageInstances.ts",{instances:[],alreadyLogged:new Set}),ie="The client runtime of Server Routing as well as the client runtime of Client Routing are both being loaded. Make sure they aren't loaded both at the same time for a given page. See https://vite-plugin-ssr.com/client-runtimes-conflict",H="Two vite-plugin-ssr client runtime instances are being loaded. Make sure your client-side bundles don't include vite-plugin-ssr twice. (In order to reduce the size of your client-side JavaScript bundles.)";function G(){{const e=B(w.instances);Re(e.length<=1,`Both vite-plugin-ssr@${e[0]} and vite-plugin-ssr@${e[1]} loaded. Only one version should be loaded.`)}w.checkSingleInstance&&w.instances.length>1&&_(!1,H,{onlyOnce:!0,showStackTrace:!0})}function Bt(e){_(w.isClientRouting!==!0,ie,{onlyOnce:!0,showStackTrace:!0}),_(w.isClientRouting===void 0,H,{onlyOnce:!0,showStackTrace:!0}),w.isClientRouting=!1,w.checkSingleInstance=!0,G()}function Ht(e){_(w.isClientRouting!==!1,ie,{onlyOnce:!0,showStackTrace:!0}),_(w.isClientRouting===void 0,H,{onlyOnce:!0,showStackTrace:!0}),w.isClientRouting=!0,w.checkSingleInstance=!0,G()}function Pe(e){w.instances.push(e),G()}function Re(e,t){if(e)return;const n=`[vite-plugin-ssr][Wrong Usage] ${t}`;throw new Error(n)}function _(e,t,{onlyOnce:n,showStackTrace:r}){if(e)return;const i=`[vite-plugin-ssr][Warning] ${t}`;if(n){const{alreadyLogged:s}=w,a=n===!0?i:n;if(s.has(a))return;s.add(a)}console.warn(r?new Error(i):i)}const be="0.4.142",R={projectName:"vite-plugin-ssr",projectVersion:be,npmPackageName:"vite-plugin-ssr",githubRepository:"https://github.com/brillout/vite-plugin-ssr"};Pe(R.projectVersion);const y=new Proxy({},{get:(e,t)=>n=>t==="code"?`\`${n}\``:t==="string"?`'${n}'`:n}),m=T("utils/assert.ts",{alreadyLogged:new Set,logger(e,t){t==="info"?console.log(e):console.warn(e)},showStackTraceList:new WeakSet}),Te=`[${R.npmPackageName}]`,Ie=`[${R.npmPackageName}@${R.projectVersion}]`,M=2;function o(e,t){var a;if(e)return;const n=(()=>{if(!t)return null;const l=typeof t=="string"?t:JSON.stringify(t);return y.dim(`Debug info (for ${R.projectName} maintainers; you can ignore this): ${l}`)})(),r=`${R.githubRepository}/issues/new`;let i=[`You stumbled upon a bug in ${R.projectName}'s source code.`,`Go to ${y.blue(r)} and copy-paste this error; a maintainer will fix the bug (usually under 24 hours).`,n].filter(Boolean).join(" ");i=L(i),i=W(i,"Bug"),i=j(i,!0);const s=U(i,M);throw(a=m.onBeforeLog)==null||a.call(m),s}function h(e,t,{showStackTrace:n}={}){var i;if(e)return;t=L(t),t=W(t,"Wrong Usage"),t=j(t);const r=U(t,M);throw n&&m.showStackTraceList.add(r),(i=m.onBeforeLog)==null||i.call(m),r}function _e(e){return e=L(e),e=W(e,"Error"),e=j(e),U(e,M)}function x(e,t,{onlyOnce:n,showStackTrace:r}){var i;if(!e){if(t=L(t),t=W(t,"Warning"),t=j(t),n){const{alreadyLogged:s}=m,a=n===!0?t:n;if(s.has(a))return;s.add(a)}if((i=m.onBeforeLog)==null||i.call(m),r){const s=new Error(t);m.showStackTraceList.add(s),m.logger(s,"warn")}else m.logger(t,"warn")}}function Gt(e,t,{onlyOnce:n}){var r;if(t=L(t),t=j(t),n){const{alreadyLogged:i}=m,s=t;if(i.has(s))return;i.add(s)}(r=m.onBeforeLog)==null||r.call(m),m.logger(t,"info")}function W(e,t){let n=`[${t}]`;const r=t==="Warning"?"yellow":"red";return n=y.bold(y[r](n)),`${n}${e}`}function L(e){return e.startsWith("[")?e:` ${e}`}function j(e,t=!1){return`${t?Ie:Te}${e}`}function xe(){o(V())}const O=T("utils/assertRouterType.ts",{});function Mt(){se(Le()),O.isClientRouting=!0}function Le(){return O.isClientRouting!==!1}function Jt(){se(O.isClientRouting!==!0),O.isClientRouting=!1}function se(e){h(V(),`${y.cyan("import { something } from 'vite-plugin-ssr/client/router'")} is forbidden on the server-side`,{showStackTrace:!0}),x(e,"You shouldn't `import { something } from 'vite-plugin-ssr/client/router'` when using Server Routing. The 'vite-plugin-ssr/client/router' utilities work only with Client Routing. In particular, don't `import { navigate }` nor `import { prefetch }` as they unnecessarily bloat your client-side bundle sizes.",{showStackTrace:!0,onlyOnce:!0})}function je(){xe()}function K(e){const t=e/1e3;if(t<120){const n=Q(t);return`${n} second${X(n)}`}{const n=t/60,r=Q(n);return`${r} minute${X(r)}`}}function Q(e){let t=e.toFixed(1);return t.endsWith(".0")&&(t=t.slice(0,-2)),t}function X(e){return e==="1"?"":"s"}const Ce=T("utils/executeHook.ts",{userHookErrors:new Map});function Oe(e,t,n){const{timeoutErr:r,timeoutWarn:i}=ke(t);let s,a;const l=new Promise((f,$)=>{s=d=>{c(),f(d)},a=d=>{c(),$(d)}}),c=()=>{clearTimeout(u),clearTimeout(g)},u=setTimeout(()=>{x(!1,`The ${t}() hook defined by ${n} is taking more than ${K(i)}`,{onlyOnce:!1})},i),g=setTimeout(()=>{const f=_e(`Hook timeout: the ${t}() hook defined by ${n} didn't finish after ${K(r)}`);a(f)},r);return(async()=>{try{const f=await e();s(f)}catch(f){S(f)&&Ce.userHookErrors.set(f,{hookName:t,hookFilePath:n}),a(f)}})(),l}function ke(e){return e==="onBeforeRoute"?{timeoutErr:5*1e3,timeoutWarn:1*1e3}:e==="onBeforePrerender"?{timeoutErr:10*60*1e3,timeoutWarn:30*1e3}:{timeoutErr:40*1e3,timeoutWarn:4*1e3}}function k(e,t,n){return typeof e=="string"?Z(e.split(""),t,n).join(""):Z(e,t,n)}function Z(e,t,n){const r=[];let i=t>=0?t:e.length+t;o(i>=0&&i<=e.length);let s=n>=0?n:e.length+n;for(o(s>=0&&s<=e.length);!(i===s||(i===e.length&&(i=0),i===s));){const a=e[i];o(a!==void 0),r.push(a),i++}return r}const oe=["http://","https://","tauri://"];function ae(e){return oe.some(t=>e.startsWith(t))||e.startsWith("/")||e.startsWith(".")||e.startsWith("?")||e.startsWith("#")||e===""}function Yt(e,t){o(t.includes(" but ")),h(typeof e=="string",`${t} should be a string`),!ae(e)&&(!e.startsWith("/")&&!e.includes(":")?h(!1,`${t} is ${y.cyan(e)} and it should be /${y.cyan(e)} instead (URL pathnames should start with a leading slash)`):h(!1,`${t} isn't a valid URL`))}function Fe(e,t){o(ae(e)),o(t.startsWith("/"));const[n,...r]=e.split("#");o(n!==void 0);const i=["",...r].join("#")||null;o(i===null||i.startsWith("#"));const s=i===null?"":D(i.slice(1)),[a,...l]=n.split("?");o(a!==void 0);const c=["",...l].join("?")||null;o(c===null||c.startsWith("?"));const u={},g={};Array.from(new URLSearchParams(c||"")).forEach(([P,q])=>{u[P]=q,g[P]=[...g[P]||[],q]});const{origin:f,pathname:$}=Ae(a,t);o(f===null||f===D(f)),o($.startsWith("/")),o(f===null||e.startsWith(f));const d=a.slice((f||"").length);Ue(e,f,d,c,i);let{pathname:E,hasBaseServer:v}=ze($,t);return E=We(E),o(E.startsWith("/")),{origin:f,pathname:E,pathnameOriginal:d,hasBaseServer:v,search:u,searchAll:g,searchOriginal:c,hash:s,hashOriginal:i}}function D(e){try{return decodeURIComponent(e)}catch{}try{return decodeURI(e)}catch{}return e}function We(e){return e=e.split("/").map(t=>D(t).split("/").join("%2F")).join("/"),e=e.replace(/\s/g,""),e}function Ae(e,t){var n;{const{origin:r,pathname:i}=ee(e);if(r)return{origin:r,pathname:i};o(i===e)}if(e.startsWith("/"))return{origin:null,pathname:e};{const r=typeof window<"u"&&((n=window==null?void 0:window.document)==null?void 0:n.baseURI)||t,i=De(e,r);return ee(i)}}function ee(e){if(oe.some(t=>e.startsWith(t))){const[t,n,r,...i]=e.split("/"),s=[t,n,r].join("/"),a=["",...i].join("/")||"/";return{origin:s,pathname:a}}else return{pathname:e,origin:null}}function De(e,t){const n=t.split("/"),r=e.split("/");let i=t.endsWith("/");e.startsWith(".")&&n.pop();for(const a in r){const l=r[a];l==""&&a==="0"||l!="."&&(l==".."?n.pop():(i=!1,n.push(l)))}let s=n.join("/");return i&&!s.endsWith("/")&&(s+="/"),s}function Ne(e){o(e.startsWith("/")),o(!e.includes("?")),o(!e.includes("#"))}function ze(e,t){Ne(e),o(Ve(t));let n=e;if(o(n.startsWith("/")),o(t.startsWith("/")),t==="/")return{pathname:e,hasBaseServer:!0};let r=t;return t.endsWith("/")&&n===k(t,0,-1)&&(r=k(t,0,-1),o(n===r)),n.startsWith(r)?(o(n.startsWith("/")||n.startsWith("http")),o(n.startsWith(r)),n=n.slice(r.length),n.startsWith("/")||(n="/"+n),o(n.startsWith("/")),{pathname:n,hasBaseServer:!0}):{pathname:e,hasBaseServer:!1}}function Ve(e){return e.startsWith("/")}function Ue(e,t,n,r,i){const s=Be(t,n,r,i);o(e===s)}function Be(e,t,n,r){return`${e||""}${t}${n||""}${r||""}`}function qt(e){const t=window.location.href,{searchOriginal:n,hashOriginal:r,pathname:i}=Fe(t,"/");let s;return e!=null&&e.withoutHash?s=`${i}${n||""}`:s=`${i}${n||""}${r||""}`,o(s.startsWith("/")),s}function J(e){return e instanceof Function||typeof e=="function"}function p(e,t,n="unknown"){if(!S(e))return!1;if(!(t in e))return n==="undefined";if(n==="unknown")return!0;const r=e[t];return n==="array"?Array.isArray(r):n==="object"?S(r):n==="string[]"?Array.isArray(r)&&r.every(i=>typeof i=="string"):n==="function"?J(r):Array.isArray(n)?typeof r=="string"&&n.includes(r):n==="null"?r===null:n==="undefined"?r===void 0:n==="true"?r===!0:n==="false"?r===!1:typeof r===n}function Y(e,t){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}je();const He=["js","ts","cjs","cts","mjs","mts","jsx","tsx","cjsx","ctsx","mjsx","mtsx"],le=["vue","svelte","marko","md","mdx"],Ge=[...He,...le];function ce(e){const t=Ge.some(n=>e.endsWith("."+n));return o(!Me(e)||t),t}function Me(e){return/\.(c|m)?(j|t)sx?$/.test(e)}function Je(e){return le.some(t=>e.endsWith("."+t))}function Kt(e){return(t,n)=>{const r=e(t),i=e(n);return r===i?0:r>i?-1:1}}function Ye(e){return(t,n)=>{const r=e(t),i=e(n);if(o([!0,!1,null].includes(r)),o([!0,!1,null].includes(i)),r===i)return 0;if(r===!0||i===!1)return-1;if(i===!0||r===!1)return 1;o(!1)}}function qe(e){return Ye(t=>{const n=e(t);return n===null?null:!n})}function Ke(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}const Qe=e=>e!=null;function ue(e){const t=n=>`Not a posix path: ${n}`;o(e!==null,t("null")),o(typeof e=="string",t(`typeof path === ${JSON.stringify(typeof e)}`)),o(e!=="",t("(empty string)")),o(e),o(!e.includes("\\"),t(e))}const Xe=["$$registrations","_rerender_only"],Ze=[".md",".mdx"];function et(e,t){tt(e,t)}function tt(e,t,n){const i=Object.keys(e).filter(l=>!Xe.includes(l)),s=i.filter(l=>l!=="default"),a=i.includes("default");if(s.length===0){if(a)return;o(i.length===0),h(!1,`${t} doesn't export any value, but it should have a ${y.cyan("export default")} instead`)}else Ze.some(l=>t.endsWith(l))||s.forEach(l=>{x(s.length===0,`${t} should only have a default export: move ${y.cyan(`export { ${l} }`)} to +config.h.js or its own +${s}.js`,{onlyOnce:!0})})}function nt(e){return[null,void 0].includes(e)?String(e):["undefined","boolean","number","string"].includes(typeof e)?JSON.stringify(e):null}const rt=["clientRouting"];function it(e){rt.forEach(t=>{if(o(e.fileExports),!(t in e.fileExports))return;const n=`The value of \`${t}\` is only allowed to be \`true\`.`;h(e.fileExports[t]!==!1,`${e.filePath} has \`export { ${t} }\` with the value \`false\` which is prohibited: remove \`export { ${t} }\` instead. (${n})`),h(e.fileExports[t]===!0,`${e.filePath} has \`export { ${t} }\` with a forbidden value. ${n}`)})}const fe=["render","clientRouting","prerender","doNotPrerender"];function st(e,t){h(!fe.includes(e),`${t} has \`export default { ${e} }\` which is prohibited, use \`export { ${e} }\` instead.`)}function ot(e){let t="",n="",[r,...i]=e;return r?r==="*"?(o(i.length===0),"export *"):(r==="default"?t="export default":(t="export",i=[r,...i]),i.forEach(a=>{t=`${t} { ${a}`,n=` }${n}`}),t+n):null}function Qt(e,t,n){const r=de(e,t);if(r===null)return null;const{value:i,definedAtInfo:s}=r;return n&&at(i,n,t,s),{value:i}}function Xt(e,t){const n=de(e,t);o(n);const{definedAtInfo:r}=n;return o(r),r}function de(e,t){const n=e.configValues[t];if(!n)return null;const{value:r,definedAtInfo:i}=n;return r===null?null:{value:r,definedAtInfo:i}}function Zt(e,t){const n=t.find(r=>r.pageId===e);return o(t.length>0),o(n),n}function at(e,t,n,r){o(e!==null);const i=typeof e;if(i===t)return;const s=nt(e),a=s!==null?`value ${y.cyan(s)}`:`type ${y.cyan(i)}`,l=ge(n,{definedAtInfo:r});h(!1,`${l} has an invalid ${a}: is should be a ${y.cyan(t)} instead`)}function ge(e,{definedAtInfo:t},n,r){let i=`Config ${y.cyan(e)}`;return t!==null&&(i=`${i} defined at ${lt(t)}`),i}function lt(e,t){const{filePath:n,fileExportPath:r}=e;let i=n;const s=ot(r);return s&&(i=`${i} > ${y.cyan(s)}`),i}function ct(e,t){const n={},r={},i={};e.forEach(l=>{ut(l).forEach(({exportName:u,exportValue:g,isFromDefaultExport:f})=>{o(u!=="default"),i[u]=i[u]??[],i[u].push({exportValue:g,exportSource:`${l.filePath} > ${f?`\`export default { ${u} }\``:`\`export { ${u} }\``}`,filePath:l.filePath,_filePath:l.filePath,_fileType:l.fileType,_isFromDefaultExport:f})})}),t&&Object.entries(t.configValues).forEach(([l,c])=>{const{value:u,definedAtInfo:g}=c;let f=null;g&&(f=g.filePath);const $=ge(l,c);r[l]=r[l]??u,n[l]=n[l]??[],o(n[l].length===0),n[l].push({configValue:u,configDefinedAt:$,configDefinedByFile:f});const d=l;i[d]=i[d]??[],i[d].push({exportValue:u,exportSource:$,filePath:f,_filePath:f,_fileType:null,_isFromDefaultExport:null})});const s=ft(),a={};return Object.entries(i).forEach(([l,c])=>{c.forEach(({exportValue:u,_fileType:g,_isFromDefaultExport:f})=>{a[l]=a[l]??u,g===".page"&&!f&&(l in s||(s[l]=u))})}),o(!("default"in a)),o(!("default"in i)),{config:r,configEntries:n,exports:a,exportsAll:i,pageExports:s}}function ut(e){const{filePath:t,fileExports:n}=e;o(n),o(ce(t));const r=[];return Object.entries(n).sort(qe(([i])=>i==="default")).forEach(([i,s])=>{let a=i==="default";if(a)if(Je(t))i="Page";else{h(S(s),`The ${y.cyan("export default")} of ${t} should be an object.`),Object.entries(s).forEach(([l,c])=>{st(l,t),r.push({exportName:l,exportValue:c,isFromDefaultExport:a})});return}r.push({exportName:i,exportValue:s,isFromDefaultExport:a})}),r.forEach(({exportName:i,isFromDefaultExport:s})=>{o(!(s&&fe.includes(i)))}),r}function ft(){return new Proxy({},{get(...e){return V()||x(!1,"`pageContext.pageExports` is outdated. Use `pageContext.exports` instead, see https://vite-plugin-ssr.com/exports",{onlyOnce:!0,showStackTrace:!0}),Reflect.get(...e)}})}function dt(e){const t=".page.",n=k(e.split(t),0,-1).join(t);return o(!n.includes("\\")),n}function b(e){ue(e)}function en(e,t){if(t.length>0){const r=t.filter(i=>i.isErrorPage);return r.length===0?null:(h(r.length===1,"Only one error page can be defined"),r[0].pageId)}const n=B(e.map(({pageId:r})=>r).filter(r=>A(r)));if(h(n.length<=1,`Only one _error.page.js is allowed, but found several: ${n.join(" ")}`),n.length>0){const r=n[0];return o(r),r}return null}function A(e,t){return o(!e.includes("\\")),e.includes("/_error")}function gt(e,t){if(t.length>0){const n=t.find(r=>r.pageId===e);return o(n),n.isErrorPage}else return A(e)}const ht=[".page",".page.server",".page.route",".page.client",".css"];function pt(e){if(ue(e),e.endsWith(".css"))return".css";o(ce(e),e);const n=e.split("/").slice(-1)[0].split("."),r=n.slice(-3)[0],i=n.slice(-2)[0];if(i==="page")return".page";if(o(r==="page",e),i==="server")return".page.server";if(i==="client")return".page.client";if(i==="route")return".page.route";o(!1,e)}function he(e){const t=s=>i.pageId===s||i.isDefaultPageFile&&(te(i.filePath)||mt(s,i.filePath)),n=pt(e),i={filePath:e,fileType:n,isEnv:s=>{if(o(n!==".page.route"),s==="CLIENT_ONLY")return n===".page.client"||n===".css";if(s==="SERVER_ONLY")return n===".page.server";if(s==="CLIENT_AND_SERVER")return n===".page";o(!1)},isRelevant:t,isDefaultPageFile:N(e),isRendererPageFile:n!==".css"&&N(e)&&te(e),isErrorPageFile:A(e),pageId:dt(e)};return i}function N(e){return b(e),A(e)?!1:e.includes("/_default")}function te(e){return b(e),e.includes("/renderer/")}function mt(e,t){b(e),b(t),o(!e.endsWith("/")),o(!t.endsWith("/")),o(N(t));const n=k(t.split("/"),0,-1).filter(r=>r!=="_default").join("/");return e.startsWith(n)}function yt(e){o(Array.isArray(e)),e.forEach(t=>{o(S(t)),o(p(t,"pageId","string")),o(p(t,"routeFilesystem"))})}function Et(e){o(e),o(p(e,"onBeforeRoute")),o(p(e,"onPrerenderStart"))}function wt(e){o(p(e,"isGeneratedFile")),o(e.isGeneratedFile!==!1,"vite-plugin-ssr was re-installed(/re-built). Restart your app."),o(e.isGeneratedFile===!0,`\`isGeneratedFile === ${e.isGeneratedFile}\``),o(p(e,"pageFilesLazy","object")),o(p(e,"pageFilesEager","object")),o(p(e,"pageFilesExportNamesLazy","object")),o(p(e,"pageFilesExportNamesEager","object")),o(p(e.pageFilesLazy,".page")),o(p(e.pageFilesLazy,".page.client")||p(e.pageFilesLazy,".page.server")),o(p(e,"pageFilesList","string[]")),o(p(e,"pageConfigs")),o(p(e,"pageConfigGlobal"));const{pageConfigs:t,pageConfigGlobal:n}=e;yt(t),Et(n);const r={};C(e.pageFilesLazy).forEach(({filePath:s,pageFile:a,globValue:l})=>{a=r[s]=r[s]??a;const c=l;ne(c),a.loadFile=async()=>{"fileExports"in a||(a.fileExports=await c(),it(a))}}),C(e.pageFilesExportNamesLazy).forEach(({filePath:s,pageFile:a,globValue:l})=>{a=r[s]=r[s]??a;const c=l;ne(c),a.loadExportNames=async()=>{if(!("exportNames"in a)){const u=await c();h("exportNames"in u,"You seem to be using Vite 2 but the latest vite-plugin-ssr versions only work with Vite 3"),o(p(u,"exportNames","string[]"),a.filePath),a.exportNames=u.exportNames}}}),C(e.pageFilesEager).forEach(({filePath:s,pageFile:a,globValue:l})=>{a=r[s]=r[s]??a;const c=l;o(S(c)),a.fileExports=c}),C(e.pageFilesExportNamesEager).forEach(({filePath:s,pageFile:a,globValue:l})=>{a=r[s]=r[s]??a;const c=l;o(S(c)),o(p(c,"exportNames","string[]"),a.filePath),a.exportNames=c.exportNames}),e.pageFilesList.forEach(s=>{r[s]=r[s]??he(s)});const i=Object.values(r);return i.forEach(({filePath:s})=>{o(!s.includes("\\"))}),{pageFiles:i,pageConfigs:t,pageConfigGlobal:n}}function C(e){const t=[];return Object.entries(e).forEach(([n,r])=>{o(ht.includes(n)),o(S(r)),Object.entries(r).forEach(([i,s])=>{const a=he(i);o(a.fileType===n),t.push({filePath:i,pageFile:a,globValue:s})})}),t}function ne(e){o(J(e))}const I=T("setPageFiles.ts",{});function tn(e){const{pageFiles:t,pageConfigs:n,pageConfigGlobal:r}=wt(e);I.pageFilesAll=t,I.pageConfigs=n,I.pageConfigGlobal=r}async function nn(e,t){o(!I.pageFilesGetter),o(t===void 0);const{pageFilesAll:n,pageConfigs:r,pageConfigGlobal:i}=I;o(n&&r&&i);const s=St(n,r);return{pageFilesAll:n,allPageIds:s,pageConfigs:r,pageConfigGlobal:i}}function St(e,t){const n=e.filter(({isDefaultPageFile:s})=>!s).map(({pageId:s})=>s),r=B(n),i=t.map(s=>s.pageId);return[...r,...i]}function $t(e,t){return pe(e,t,!0)}function rn(e,t){return pe(e,t,!1)}function pe(e,t,n){const r=n?"CLIENT_ONLY":"SERVER_ONLY",i=e.filter(d=>d.isRelevant(t)&&d.fileType!==".page.route").sort(vt(n,t)),s=d=>{const E=i.filter(P=>P.pageId===t&&P.isEnv(d?"CLIENT_AND_SERVER":r));h(E.length<=1,`Merge the following files into a single file: ${E.map(P=>P.filePath).join(" ")}`);const v=E[0];return o(v===void 0||!v.isDefaultPageFile),v},a=s(!1),l=s(!0),c=d=>i.filter(E=>E.isRendererPageFile&&E.isEnv(d?"CLIENT_AND_SERVER":r))[0],u=c(!1),g=c(!0),f=i.filter(d=>d.isDefaultPageFile&&!d.isRendererPageFile&&(d.isEnv(r)||d.isEnv("CLIENT_AND_SERVER")));return[a,l,...f,u,g].filter(Qe)}function vt(e,t){const n=e?"CLIENT_ONLY":"SERVER_ONLY",r=-1,i=1,s=0;return(a,l)=>{if(!a.isDefaultPageFile&&l.isDefaultPageFile)return r;if(!l.isDefaultPageFile&&a.isDefaultPageFile)return i;{const c=a.isRendererPageFile,u=l.isRendererPageFile;if(!c&&u)return r;if(!u&&c)return i;o(c===u)}{const c=re(t,a.filePath),u=re(t,l.filePath);if(c<u)return r;if(u<c)return i;o(c===u)}{if(a.isEnv(n)&&l.isEnv("CLIENT_AND_SERVER"))return r;if(l.isEnv(n)&&a.isEnv("CLIENT_AND_SERVER"))return i}return s}}function re(e,t){b(e),b(t);let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);const r=e.slice(n),i=t.slice(n),s=r.split("/").length,a=i.split("/").length;return s+a}function Pt(e,t){const n=e.filter(i=>i.pageId===t);return o(n.length<=1),n[0]??null}async function Rt(e,t){if(e.isLoaded&&!t)return e;const n=await e.loadConfigValuesAll(),r=(i,s,a,l)=>{e.configValues[i]={value:s,definedAtInfo:{filePath:a,fileExportPath:[l]}},bt(s,i,a)};return n.forEach(i=>{if(i.isPlusFile){const{importFileExports:s,importFilePath:a}=i;i.configName!=="client"&&et(s,a),Object.entries(s).forEach(([l,c])=>{const u=l!=="default",g=u?l:i.configName;u&&g in e.configValues||r(g,c,a,l)})}else{const{configName:s,importFilePath:a,importFileExportValue:l,importFileExportName:c}=i;r(s,l,a,c)}}),Y(e,{isLoaded:!0}),e}function bt(e,t,n){o(!n.includes("+config.")),h(e!==null,`Set ${y.cyan(t)} to ${y.cyan("null")} in a +config.h.js file instead of ${n}`)}const me="__whileFetchingAssets";async function sn(e,t,n){const r=$t(e,n),i=Pt(t,n);let s;const a=!1;try{s=(await Promise.all([i&&Rt(i,a),...r.map(E=>{var v;return(v=E.loadFile)==null?void 0:v.call(E)})]))[0]}catch(d){throw Tt(d)&&Object.assign(d,{[me]:!0}),d}const{config:l,configEntries:c,exports:u,exportsAll:g,pageExports:f}=ct(r,s);return{config:l,configEntries:c,exports:u,exportsAll:g,pageExports:f,_pageFilesLoaded:r}}function on(e){return e?e[me]===!0:!1}function Tt(e){return e instanceof Error?["Failed to fetch dynamically imported module","error loading dynamically imported module","Importing a module script failed","error resolving module specifier","failed to resolve module"].some(n=>e.message.toLowerCase().includes(n.toLowerCase())):!1}const It=[{is:e=>e===void 0,match:e=>e==="!undefined",serialize:()=>"!undefined",deserialize:()=>{}},{is:e=>e===1/0,match:e=>e==="!Infinity",serialize:()=>"!Infinity",deserialize:()=>1/0},{is:e=>e===-1/0,match:e=>e==="!-Infinity",serialize:()=>"!-Infinity",deserialize:()=>-1/0},{is:e=>typeof e=="number"&&isNaN(e),match:e=>e==="!NaN",serialize:()=>"!NaN",deserialize:()=>NaN},{is:e=>e instanceof Date,match:e=>e.startsWith("!Date:"),serialize:e=>"!Date:"+e.toISOString(),deserialize:e=>new Date(e.slice(6))},{is:e=>typeof e=="bigint",match:e=>e.startsWith("!BigInt:"),serialize:e=>"!BigInt:"+e.toString(),deserialize:e=>{if(typeof BigInt>"u")throw new Error("Your JavaScript environement does not support BigInt. Consider adding a polyfill.");return BigInt(e.slice(8))}},{is:e=>e instanceof RegExp,match:e=>e.startsWith("!RegExp:"),serialize:e=>"!RegExp:"+e.toString(),deserialize:e=>{e=e.slice(8);const t=e.match(/\/(.*)\/(.*)?/),n=t[1],r=t[2];return new RegExp(n,r)}},{is:e=>e instanceof Map,match:e=>e.startsWith("!Map:"),serialize:(e,t)=>"!Map:"+t(Array.from(e.entries())),deserialize:(e,t)=>new Map(t(e.slice(5)))},{is:e=>e instanceof Set,match:e=>e.startsWith("!Set:"),serialize:(e,t)=>"!Set:"+t(Array.from(e.values())),deserialize:(e,t)=>new Set(t(e.slice(5)))},{is:e=>typeof e=="string"&&e.startsWith("!"),match:e=>e.startsWith("!"),serialize:e=>"!"+e,deserialize:e=>e.slice(1)}];function ye(e){const t=JSON.parse(e);return Ee(t)}function Ee(e){return typeof e=="string"?_t(e):(typeof e=="object"&&e!==null&&Object.entries(e).forEach(([t,n])=>{e[t]=Ee(n)}),e)}function _t(e){for(const{match:t,deserialize:n}of It)if(t(e))return n(e,ye);return e}function an(){const e="vite-plugin-ssr_pageContext",t=document.getElementById(e);h(t,`The element #${e} (which vite-plugin-ssr automatically injects into the HTML) is missing from the DOM. This may happen if your HTML is malformed. Make sure your HTML isn't malformed, and make sure you don't remove #${e} from the HTML nor from the DOM.`);const n=t.textContent;o(n);const r=ye(n);return o(p(r,"_pageId","string")),Y(r,{_hasPageContextFromServer:!0}),r}function z(e,t){if(!(t in e.exports))return null;const n=e.exports[t],r=e.exportsAll[t][0];if(o(r.exportValue===n),n===null)return null;const i=r.exportSource;return xt(n,{hookName:t,hookFilePath:i}),{hookFn:n,hookName:t,hookFilePath:i}}function ln(e,t){z(e,t)}function xt(e,{hookName:t,hookFilePath:n}){o(t&&n),o(!t.endsWith(")")),h(J(e),`hook ${t}() defined by ${n} should be a function`)}function Lt(e){const t=Object.entries(e);for(const n in e)delete e[n];t.sort(([n],[r])=>Ke(n,r)).forEach(([n,r])=>{e[n]=r})}function jt(e){Ct(e),Ot(e)}function Ct(e){gt(e._pageId,e._pageConfigs)&&o(p(e,"is404","boolean"))}function Ot(e){if(e.is404===void 0||e.is404===null)return;const t=e.pageProps||{};if(!S(t)){x(!1,"pageContext.pageProps should be an object",{showStackTrace:!0,onlyOnce:!0});return}t.is404=t.is404||e.is404,e.pageProps=t}const kt="not-serializable",F=T("getPageContextProxyForUser.ts",{});function Ft(e){return o([!0,!1].includes(e._hasPageContextFromServer)),o([!0,!1].includes(e._hasPageContextFromClient)),new Proxy(e,{get(t,n){const r=e[n],i=JSON.stringify(n);return h(r!==kt,`pageContext[${i}] couldn't be serialized and, therefore, is missing on the client-side. Check the server logs for more information.`),Wt(e,n,`pageContext[${i}] isn't available on the client-side because ${i} is missing in passToClient, see https://vite-plugin-ssr.com/passToClient`),r}})}function Wt(e,t,n){F.prev===t||F.prev==="__v_raw"||(Nt(t),!(t in e)&&(Dt(t)||e._hasPageContextFromServer&&!e._hasPageContextFromClient&&h(!1,n)))}const At=["then","toJSON"];function Dt(e){return!!(At.includes(e)||typeof e=="symbol"||typeof e!="string"||e.startsWith("__v_"))}function Nt(e){F.prev=e,window.setTimeout(()=>{F.prev=void 0},0)}function zt(e,t){if(t){const i=e;o([!0,!1].includes(i.isHydration)),o([!0,!1,null].includes(i.isBackwardNavigation))}else{const i=e;o(i.isHydration===!0),o(i.isBackwardNavigation===null)}o("config"in e),o("configEntries"in e),o("exports"in e),o("exportsAll"in e),o("pageExports"in e),o(S(e.pageExports));const n=e.exports.Page;Y(e,{Page:n}),Vt(e),Lt(e);const r=Ft(e);return jt(e),r}function Vt(e){Object.entries(e).forEach(([t,n])=>{delete e[t],e[t]=n})}async function cn(e,t){const n=zt(e,t);let r=null,i;r=z(e,"render"),i="render";{const l=z(e,"onRenderClient");l&&(r=l,i="onRenderClient")}if(!r){const l=Ut(e);if(e._pageConfigs.length>0)h(!1,`No onRenderClient() hook defined for URL '${l}', but it's needed, see https://vite-plugin-ssr.com/onRenderClient`);else{const c=e._pageFilesLoaded.filter(g=>g.fileType===".page.client");let u;c.length===0?u="No file `*.page.client.*` found for URL "+l:u="One of the following files should export a `render()` hook: "+c.map(g=>g.filePath).join(" "),h(!1,u)}}o(r);const s=r.hookFn;o(i);const a=await Oe(()=>s(n),i,r.hookFilePath);h(a===void 0,`The ${i}() hook defined by ${r.hookFilePath} isn't allowed to return a value`)}function Ut(e){let t;try{t=e.urlPathname??e.urlOriginal}catch{}return t=t??window.location.href,t}export{Yt as A,k as B,Qt as C,Xt as D,lt as E,A as F,Ve as G,$t as H,rn as I,Pt as J,z as K,Oe as L,Gt as M,R as N,en as O,zt as P,Zt as Q,ye as R,_e as S,on as T,ae as U,an as a,h as b,nn as c,x as d,Jt as e,Bt as f,qt as g,cn as h,ln as i,Mt as j,Ht as k,sn as l,xe as m,S as n,Y as o,y as p,T as q,V as r,tn as s,Le as t,J as u,o as v,Fe as w,Ye as x,Kt as y,p as z};
